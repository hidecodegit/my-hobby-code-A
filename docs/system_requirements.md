# SYS.1 システム要件分析（System Requirements Analysis）
これは V字モデル SYS.1 の正式成果物です。
ステークホルダー要求を検証可能なシステム要件に変換したものです。

**最終更新**: 2025-12-09（Hideo & Grok 共同リファイン・用語集強化）

### 改訂履歴
| 日付         | 変更者               | 変更内容                                   |
|--------------|----------------------|--------------------------------------------|
| 2025-12-09   | Hideo & Grok         | 用語集を大幅に強化し、FR/NFR/メトリクス/クライテリアの定義を明確化。 |
| 2025-12-08   | Hideo & Gemini       | 「合格基準」を「メトリクス」と「目標値」に分割し、8列構成に変更。 |
| 2025-12-06   | Hideo, Grok, Gemini  | 7列化、Notes削除、合格基準・検証方法明確化、国際標準名称統一 |
| 2025-12-05   | Hideo                | FR/NFRテーブル完成、トレーサビリティマトリクス分離 |
| 2025-10-31   | Hideo & Grok         | 初期REQ-01/02定義                          |

### 用語集（SYS.1 ドキュメント固有）

- **7月データ**  
  192件の過去センサーデータ（秒なし形式）。後方互換性のベースラインであり、REQ-01.1 の検証リファレンス。

- **FR（Functional Requirement / 機能要件）**  
  「システムが**必ず提供しなければならない機能**」。  
  これが欠けるとユーザーが即座に「使えない」と判断する。  
  例：センサーデータ取得（REQ-01）、Google Drive へのアップロード（REQ-02）。

- **NFR（Non-Functional Requirement / 非機能要件）**  
  「システムが**どう動くべきか**」を規定する品質特性。  
  欠けても即座には動くが、長期運用で静かに死ぬ。  
  例：タイムスタンプの柔軟パース（REQ-01.1）、障害時の Slack 通知（REQ-02.2）。

- **メトリクス（Metrics）**  
  要件の達成度を**客観的に測定可能な指標**。  
  「何を測るか」を定義する列。

- **クライテリア（Criteria）**  
  メトリクスに対して設定された**合否判定基準（目標値）**。  
  「どこまで達成すればOKか」を明示的に示す。  
  本ドキュメントでは「Verification Criteria」として、V&Vフェーズで直接使用される。  
  例：E2E処理時間 ≤ 45秒（平均）／≤ 60秒（99%tile）。

- **即死リスク**（非公式だが実務で超有用）  
  当該要件が未達の場合にシステムが即座に使用不能になる度合い。  
  優先度付けと「後回しにしても本当に大丈夫か？」の最終判断に使用。

### 機能要件（FR）／非機能要件（NFR）

| 要件ID   | 分類 | 説明                                                                 | 優先度 | ステータス | メトリクス                               | クライテリア                                 | 検証方法（成果物）               |
|----------|------|----------------------------------------------------------------------|--------|------------|------------------------------------------|----------------------------------------------|--------------------------------|
| REQ-01   | FR   | AHT25センサーから温度・湿度を15分間隔で取得し、ローカルファイルに保存 | High   | [x]        | 欠測数、時刻誤差                         | 0 (24時間稼働時)、±5秒以内                  | `system-tests.md`              |
| REQ-01.1 | NFR  | タイムスタンプはJST、秒の有無が混在しても正しくパース可能           | High   | [x]        | パース成功率                             | 100% (7月データと最新データの両方)           | `unit-tests.md`                |
| REQ-02   | FR   | 収集データをGoogle Driveにアップロード（最新即時＋全履歴2時間毎、月替り自動切替） | High   | [p]        | E2E処理時間（平均 / 99%tile）            | ≤ 45秒 / ≤ 60秒 (ネットワーク正常時)         | `integration-tests.md`         |
| REQ-02.1 | NFR  | 全履歴アップロードは2時間毎、月替りは00:00 JSTに自動切替           | Medium | [p]        | 全履歴アップロード間隔、月替りファイル生成時刻 | 2時間±5分、当日00:05 JSTまで                 | `system-tests.md`              |
| REQ-02.2 | NFR  | アップロード失敗時はSlackアラート                                   | Low    | [ ]        | 通知遅延                                 | ≤ 5分 (失敗発生から通知到着まで)             | `system-tests.md`（障害注入）  |
| REQ-03   | FR   | DriveデータをMySQL(`sensor_data_db`)に取り込み、Macで折れ線グラフ可視化（異常値ハイライト） | Medium | [p]        | 描画時間 (192件)、異常値の可視性         | ≤ 10秒、グラフ上で強調表示                   | `integration-tests.md` + 手動確認 |
| REQ-03.1 | NFR  | 可視化性能・異常値検出精度                                          | Medium | [p]        | 描画時間、異常値検出精度                 | < 10秒、≥ 95%                                | `integration-tests.md`         |
| REQ-04   | FR   | GitHub ActionsでCI/CD自動化（pytest実行・RPiデプロイ）             | Medium | [ ]        | デプロイ時間 (mainプッシュ後)            | ≤ 5分                                        | `product-acceptance.md`        |
| REQ-04.1 | NFR  | 旧月データは自動圧縮アーカイブ（将来拡張）                          | Low    | [ ]        | アーカイブ生成時間、復元正確性           | < 30秒、100%                                 | `system-tests.md`（拡張テスト）|

*ステータス凡例: [x]=完了, [p]=進行中, [ ]=未着手*

### トレーサビリティ
双方向トレーサビリティは別ファイル `traceability_matrix.md` で管理します。